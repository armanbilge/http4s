<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          org/http4s/client/middleware/Retry.scala.html
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/css/theme.default.min.css" type="text/css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/js/jquery.tablesorter.min.js"></script><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"/><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script type="text/javascript">
        $(document).ready(function() {$(".tablesorter").tablesorter();});
      </script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier, monospace;'>1 <span style=''>/*
</span>2 <span style=''> * Copyright 2014 http4s.org
</span>3 <span style=''> *
</span>4 <span style=''> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
</span>5 <span style=''> * you may not use this file except in compliance with the License.
</span>6 <span style=''> * You may obtain a copy of the License at
</span>7 <span style=''> *
</span>8 <span style=''> *     http://www.apache.org/licenses/LICENSE-2.0
</span>9 <span style=''> *
</span>10 <span style=''> * Unless required by applicable law or agreed to in writing, software
</span>11 <span style=''> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
</span>12 <span style=''> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
</span>13 <span style=''> * See the License for the specific language governing permissions and
</span>14 <span style=''> * limitations under the License.
</span>15 <span style=''> */
</span>16 <span style=''>
</span>17 <span style=''>package org.http4s
</span>18 <span style=''>package client
</span>19 <span style=''>package middleware
</span>20 <span style=''>
</span>21 <span style=''>import cats.effect.kernel.Resource
</span>22 <span style=''>import cats.effect.kernel.Temporal
</span>23 <span style=''>import cats.effect.std.Hotswap
</span>24 <span style=''>import cats.syntax.all._
</span>25 <span style=''>import org.http4s.Status._
</span>26 <span style=''>import org.http4s.headers.`Idempotency-Key`
</span>27 <span style=''>import org.http4s.headers.`Retry-After`
</span>28 <span style=''>import org.log4s.getLogger
</span>29 <span style=''>import org.typelevel.ci.CIString
</span>30 <span style=''>import org.typelevel.vault.Key
</span>31 <span style=''>
</span>32 <span style=''>import java.time.Instant
</span>33 <span style=''>import java.time.temporal.ChronoUnit
</span>34 <span style=''>import scala.concurrent.duration._
</span>35 <span style=''>import scala.math.min
</span>36 <span style=''>import scala.math.pow
</span>37 <span style=''>import scala.math.random
</span>38 <span style=''>
</span>39 <span style=''>object Retry {
</span>40 <span style=''>  private[this] val logger = getLogger
</span>41 <span style=''>
</span>42 <span style=''>  /** This key tracks the attempt count, the retry middleware starts the very
</span>43 <span style=''>    * first request with 1 as the first request, even with no retries
</span>44 <span style=''>    * (aka the first attempt). If one wants to monitor retries
</span>45 <span style=''>    * explicitly and not the attempts one may want to subtract the
</span>46 <span style=''>    * value of this key by 1.
</span>47 <span style=''>    */
</span>48 <span style=''>  val AttemptCountKey: Key[Int] = </span><span style='background: #AEF1AE'>Key.newKey[cats.effect.SyncIO, Int].unsafeRunSync()</span><span style=''>
</span>49 <span style=''>
</span>50 <span style=''>  def apply[F[_]](
</span>51 <span style=''>      policy: RetryPolicy[F],
</span>52 <span style=''>      redactHeaderWhen: CIString =&gt; Boolean = Headers.SensitiveHeaders.contains,
</span>53 <span style=''>  )(client: Client[F])(implicit F: Temporal[F]): Client[F] =
</span>54 <span style=''>    </span><span style='background: #AEF1AE'>create[F](policy, redactHeaderWhen)(client)</span><span style=''>
</span>55 <span style=''>
</span>56 <span style=''>  def create[F[_]](
</span>57 <span style=''>      policy: RetryPolicy[F],
</span>58 <span style=''>      redactHeaderWhen: CIString =&gt; Boolean = Headers.SensitiveHeaders.contains,
</span>59 <span style=''>      logRetries: Boolean = true,
</span>60 <span style=''>  )(client: Client[F])(implicit F: Temporal[F]): Client[F] = {
</span>61 <span style=''>    def showRequest(request: Request[F], redactWhen: CIString =&gt; Boolean): String = {
</span>62 <span style=''>      val headers = </span><span style='background: #F0ADAD'>request.headers.redactSensitive(redactWhen).headers.mkString(&quot;,&quot;)</span><span style=''>
</span>63 <span style=''>      val uri = request.uri.renderString
</span>64 <span style=''>      val method = </span><span style='background: #F0ADAD'>request.method</span><span style=''>
</span>65 <span style=''>      s&quot;method=$method uri=$uri headers=$headers&quot;
</span>66 <span style=''>    }
</span>67 <span style=''>
</span>68 <span style=''>    def nextAttempt(
</span>69 <span style=''>        req: Request[F],
</span>70 <span style=''>        attempts: Int,
</span>71 <span style=''>        duration: FiniteDuration,
</span>72 <span style=''>        retryHeader: Option[`Retry-After`],
</span>73 <span style=''>        hotswap: Hotswap[F, Either[Throwable, Response[F]]],
</span>74 <span style=''>    ): F[Response[F]] = {
</span>75 <span style=''>      val headerDuration =
</span>76 <span style=''>        </span><span style='background: #AEF1AE'>retryHeader
</span>77 <span style=''></span><span style='background: #AEF1AE'>          .map { h =&gt;
</span>78 <span style=''></span><span style='background: #AEF1AE'>            h.retry match {
</span>79 <span style=''></span><span style='background: #AEF1AE'>              case Left(d) =&gt; Instant.now().until(d.toInstant, ChronoUnit.SECONDS)
</span>80 <span style=''></span><span style='background: #AEF1AE'>              case Right(secs) =&gt; secs
</span>81 <span style=''></span><span style='background: #AEF1AE'>            }
</span>82 <span style=''></span><span style='background: #AEF1AE'>          }
</span>83 <span style=''></span><span style='background: #AEF1AE'>          .getOrElse(0L)</span><span style=''>
</span>84 <span style=''>      val sleepDuration = </span><span style='background: #AEF1AE'>headerDuration.seconds.max(duration)</span><span style=''>
</span>85 <span style=''>      </span><span style='background: #AEF1AE'>F.sleep(sleepDuration) &gt;&gt; retryLoop(req, attempts + 1, hotswap)</span><span style=''>
</span>86 <span style=''>    }
</span>87 <span style=''>
</span>88 <span style=''>    def retryLoop(
</span>89 <span style=''>        req: Request[F],
</span>90 <span style=''>        attempts: Int,
</span>91 <span style=''>        hotswap: Hotswap[F, Either[Throwable, Response[F]]],
</span>92 <span style=''>    ): F[Response[F]] =
</span>93 <span style=''>      </span><span style='background: #AEF1AE'>hotswap.clear *&gt; // Release the prior connection before allocating the next, or we can deadlock the pool
</span>94 <span style=''></span><span style='background: #AEF1AE'>        hotswap
</span>95 <span style=''></span><span style='background: #AEF1AE'>          .swap(
</span>96 <span style=''></span><span style='background: #AEF1AE'>            client
</span>97 <span style=''></span><span style='background: #AEF1AE'>              .run(req.withAttribute(AttemptCountKey, attempts))
</span>98 <span style=''></span><span style='background: #AEF1AE'>              .map(_.withAttribute(AttemptCountKey, attempts))
</span>99 <span style=''></span><span style='background: #AEF1AE'>              .attempt
</span>100 <span style=''></span><span style='background: #AEF1AE'>          )
</span>101 <span style=''></span><span style='background: #AEF1AE'>          .flatMap {
</span>102 <span style=''></span><span style='background: #AEF1AE'>            case Right(response) =&gt;
</span>103 <span style=''></span><span style='background: #AEF1AE'>              policy(req, Right(response), attempts) match {
</span>104 <span style=''></span><span style='background: #AEF1AE'>                case Some(duration) =&gt;
</span>105 <span style=''></span><span style='background: #AEF1AE'>                  if (logRetries)
</span>106 <span style=''></span><span style='background: #AEF1AE'>                    logger.info(
</span>107 <span style=''></span><span style='background: #AEF1AE'>                      s&quot;Request ${showRequest(req, redactHeaderWhen)} has failed on attempt #${attempts} with reason ${response.status}. Retrying after ${duration}.&quot;
</span>108 <span style=''></span><span style='background: #AEF1AE'>                    )
</span>109 <span style=''></span><span style='background: #AEF1AE'>                  nextAttempt(req, attempts, duration, response.headers.get[`Retry-After`], hotswap)
</span>110 <span style=''></span><span style='background: #AEF1AE'>                case None =&gt;
</span>111 <span style=''></span><span style='background: #AEF1AE'>                  F.pure(response)
</span>112 <span style=''></span><span style='background: #AEF1AE'>              }
</span>113 <span style=''></span><span style='background: #AEF1AE'>
</span>114 <span style=''></span><span style='background: #AEF1AE'>            case Left(e) =&gt;
</span>115 <span style=''></span><span style='background: #AEF1AE'>              policy(req, Left(e), attempts) match {
</span>116 <span style=''></span><span style='background: #AEF1AE'>                case Some(duration) =&gt;
</span>117 <span style=''></span><span style='background: #AEF1AE'>                  // info instead of error(e), because e is not discarded
</span>118 <span style=''></span><span style='background: #AEF1AE'>                  if (logRetries)
</span>119 <span style=''></span><span style='background: #AEF1AE'>                    logger.info(e)(
</span>120 <span style=''></span><span style='background: #AEF1AE'>                      s&quot;Request threw an exception on attempt #$attempts. Retrying after $duration&quot;
</span>121 <span style=''></span><span style='background: #AEF1AE'>                    )
</span>122 <span style=''></span><span style='background: #AEF1AE'>                  nextAttempt(req, attempts, duration, None, hotswap)
</span>123 <span style=''></span><span style='background: #AEF1AE'>                case None =&gt;
</span>124 <span style=''></span><span style='background: #AEF1AE'>                  if (logRetries)
</span>125 <span style=''></span><span style='background: #AEF1AE'>                    logger.info(e)(
</span>126 <span style=''></span><span style='background: #AEF1AE'>                      s&quot;Request ${showRequest(req, redactHeaderWhen)} threw an exception on attempt #$attempts. Giving up.&quot;
</span>127 <span style=''></span><span style='background: #AEF1AE'>                    )
</span>128 <span style=''></span><span style='background: #AEF1AE'>                  F.raiseError(e)
</span>129 <span style=''></span><span style='background: #AEF1AE'>              }
</span>130 <span style=''></span><span style='background: #AEF1AE'>          }</span><span style=''>
</span>131 <span style=''>
</span>132 <span style=''>    </span><span style='background: #AEF1AE'>Client { req =&gt;
</span>133 <span style=''></span><span style='background: #AEF1AE'>      Hotswap.create[F, Either[Throwable, Response[F]]].flatMap { hotswap =&gt;
</span>134 <span style=''></span><span style='background: #AEF1AE'>        Resource.eval(retryLoop(req, 1, hotswap))
</span>135 <span style=''></span><span style='background: #AEF1AE'>      }
</span>136 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>137 <span style=''>  }
</span>138 <span style=''>}
</span>139 <span style=''>
</span>140 <span style=''>object RetryPolicy {
</span>141 <span style=''>
</span>142 <span style=''>  /** Decomposes a retry policy into components that are typically configured
</span>143 <span style=''>    * individually.
</span>144 <span style=''>    *
</span>145 <span style=''>    * @param backoff a function of attempts to an optional
</span>146 <span style=''>    * FiniteDuration.  Return None to stop retrying, or some
</span>147 <span style=''>    * duration after which the request will be retried.  See
</span>148 <span style=''>    * `exponentialBackoff` for a useful implementation.
</span>149 <span style=''>    *
</span>150 <span style=''>    * @param retriable determines whether the request is retriable
</span>151 <span style=''>    * from the request and either the throwable or response that was
</span>152 <span style=''>    * returned.  Defaults to `defaultRetriable`.
</span>153 <span style=''>    */
</span>154 <span style=''>  def apply[F[_]](
</span>155 <span style=''>      backoff: Int =&gt; Option[FiniteDuration],
</span>156 <span style=''>      retriable: (Request[F], Either[Throwable, Response[F]]) =&gt; Boolean = defaultRetriable[F] _,
</span>157 <span style=''>  ): RetryPolicy[F] = { (req, result, retries) =&gt;
</span>158 <span style=''>    if (</span><span style='background: #AEF1AE'>retriable(req, result)</span><span style=''>) </span><span style='background: #AEF1AE'>backoff(retries)</span><span style=''>
</span>159 <span style=''>    else </span><span style='background: #AEF1AE'>None</span><span style=''>
</span>160 <span style=''>  }
</span>161 <span style=''>
</span>162 <span style=''>  /** Statuses that are retriable, per HTTP spec */
</span>163 <span style=''>  val RetriableStatuses: Set[Status] = </span><span style='background: #AEF1AE'>Set(
</span>164 <span style=''></span><span style='background: #AEF1AE'>    RequestTimeout,
</span>165 <span style=''></span><span style='background: #AEF1AE'>    // TODO Leaving PayloadTooLarge out until we model Retry-After
</span>166 <span style=''></span><span style='background: #AEF1AE'>    InternalServerError,
</span>167 <span style=''></span><span style='background: #AEF1AE'>    ServiceUnavailable,
</span>168 <span style=''></span><span style='background: #AEF1AE'>    BadGateway,
</span>169 <span style=''></span><span style='background: #AEF1AE'>    GatewayTimeout,
</span>170 <span style=''></span><span style='background: #AEF1AE'>  )</span><span style=''>
</span>171 <span style=''>
</span>172 <span style=''>  /** Returns true if (the request method is idempotent or request contains Idempotency-Key header)
</span>173 <span style=''>    * and the result is either a throwable or has one of the `RetriableStatuses`.
</span>174 <span style=''>    *
</span>175 <span style=''>    * Caution: if the request body is effectful, the effects will be
</span>176 <span style=''>    * run twice.  The most common symptom of this will be resubmitting
</span>177 <span style=''>    * an idempotent request.
</span>178 <span style=''>    */
</span>179 <span style=''>  def defaultRetriable[F[_]](req: Request[F], result: Either[Throwable, Response[F]]): Boolean =
</span>180 <span style=''>    </span><span style='background: #AEF1AE'>(req.method.isIdempotent || req.headers.contains[`Idempotency-Key`]) &amp;&amp;
</span>181 <span style=''></span><span style='background: #AEF1AE'>      isErrorOrRetriableStatus(result)</span><span style=''>
</span>182 <span style=''>
</span>183 <span style=''>  /** Like [[defaultRetriable]], but returns true even if the request method
</span>184 <span style=''>    * is not idempotent.  This is useful if failed requests are assumed to
</span>185 <span style=''>    * have not reached their destination, which is a dangerous assumption.
</span>186 <span style=''>    * Use at your own risk.
</span>187 <span style=''>    *
</span>188 <span style=''>    * Caution: if the request body is effectful, the effects will be
</span>189 <span style=''>    * run twice.  The most common symptom of this will be resubmitting
</span>190 <span style=''>    * an empty request body.
</span>191 <span style=''>    */
</span>192 <span style=''>  def recklesslyRetriable[F[_]](result: Either[Throwable, Response[F]]): Boolean =
</span>193 <span style=''>    </span><span style='background: #AEF1AE'>isErrorOrRetriableStatus(result)</span><span style=''>
</span>194 <span style=''>
</span>195 <span style=''>  /** Returns true if parameter is a Left or if the response contains a retriable status(as per HTTP spec) */
</span>196 <span style=''>  def isErrorOrRetriableStatus[F[_]](result: Either[Throwable, Response[F]]): Boolean =
</span>197 <span style=''>    </span><span style='background: #AEF1AE'>isErrorOrStatus(result, RetriableStatuses)</span><span style=''>
</span>198 <span style=''>
</span>199 <span style=''>  /** Like `isErrorOrRetriableStatus` but allows the caller to specify which statuses are considered retriable */
</span>200 <span style=''>  def isErrorOrStatus[F[_]](result: Either[Throwable, Response[F]], status: Set[Status]): Boolean =
</span>201 <span style=''>    result match {
</span>202 <span style=''>      case Right(resp) =&gt; </span><span style='background: #AEF1AE'>status(resp.status)</span><span style=''>
</span>203 <span style=''>      case Left(WaitQueueTimeoutException) =&gt; </span><span style='background: #AEF1AE'>false</span><span style=''>
</span>204 <span style=''>      case _ =&gt; </span><span style='background: #AEF1AE'>true</span><span style=''>
</span>205 <span style=''>    }
</span>206 <span style=''>
</span>207 <span style=''>  def exponentialBackoff(maxWait: Duration, maxRetry: Int): Int =&gt; Option[FiniteDuration] = {
</span>208 <span style=''>    val maxInMillis = </span><span style='background: #F0ADAD'>maxWait.toMillis</span><span style=''>
</span>209 <span style=''>    k =&gt; if (</span><span style='background: #F0ADAD'>k &gt; maxRetry</span><span style=''>) </span><span style='background: #F0ADAD'>None</span><span style=''> else </span><span style='background: #F0ADAD'>Some(expBackoff(k, maxInMillis))</span><span style=''>
</span>210 <span style=''>  }
</span>211 <span style=''>
</span>212 <span style=''>  private def expBackoff(k: Int, maxInMillis: Long): FiniteDuration = {
</span>213 <span style=''>    val millis = </span><span style='background: #F0ADAD'>(pow(2.0, k.toDouble) - 1.0) * 1000.0</span><span style=''>
</span>214 <span style=''>    val interval = </span><span style='background: #F0ADAD'>min(millis, maxInMillis.toDouble)</span><span style=''>
</span>215 <span style=''>    </span><span style='background: #F0ADAD'>FiniteDuration((random() * interval).toLong, MILLISECONDS)</span><span style=''>
</span>216 <span style=''>  }
</span>217 <span style=''>}
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Tests</th>
        <th>Code</th>
      </tr><tr>
        <td>
          48
        </td>
        <td>
          11378
        </td>
        <td>
          1549
          -
          1600
        </td>
        <td>
          Apply
        </td>
        <td>
          cats.effect.SyncIO.unsafeRunSync
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          org.typelevel.vault.Key.newKey[cats.effect.SyncIO, Int](effect.this.SyncIO.syncForSyncIO, effect.this.SyncIO.syncForSyncIO).unsafeRunSync()
        </td>
      </tr><tr>
        <td>
          54
        </td>
        <td>
          12123
        </td>
        <td>
          1797
          -
          1840
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.http4s.client.middleware.Retry.create
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          Retry.this.create[F](policy, redactHeaderWhen, Retry.this.create$default$3[F])(client)(F)
        </td>
      </tr><tr>
        <td>
          62
        </td>
        <td>
          11921
        </td>
        <td>
          2176
          -
          2241
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableOnceOps.mkString
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          request.headers.redactSensitive(redactWhen).headers.mkString(&quot;,&quot;)
        </td>
      </tr><tr>
        <td>
          64
        </td>
        <td>
          11432
        </td>
        <td>
          2302
          -
          2316
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.Request.method
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          request.method
        </td>
      </tr><tr>
        <td>
          83
        </td>
        <td>
          11045
        </td>
        <td>
          2643
          -
          2877
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Option.getOrElse
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          retryHeader.map[Long](((h: org.http4s.headers.Retry-After) =&gt; h.retry match {
  case (value: org.http4s.HttpDate): scala.util.Left[org.http4s.HttpDate,Long]((d @ _)) =&gt; java.time.Instant.now().until(d.toInstant, SECONDS)
  case (value: Long): scala.util.Right[org.http4s.HttpDate,Long]((secs @ _)) =&gt; secs
})).getOrElse[Long](0L)
        </td>
      </tr><tr>
        <td>
          84
        </td>
        <td>
          11750
        </td>
        <td>
          2904
          -
          2940
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.duration.FiniteDuration.max
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.concurrent.duration.`package`.DurationLong(headerDuration).seconds.max(duration)
        </td>
      </tr><tr>
        <td>
          85
        </td>
        <td>
          11567
        </td>
        <td>
          2947
          -
          3010
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          cats.syntax.FlatMapOps.&gt;&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          cats.syntax.`package`.all.catsSyntaxFlatMapOps[F, Unit](F.sleep(sleepDuration))(F).&gt;&gt;[org.http4s.Response[F]](retryLoop(req, attempts.+(1), hotswap))(F)
        </td>
      </tr><tr>
        <td>
          93
        </td>
        <td>
          11124
        </td>
        <td>
          3176
          -
          3189
        </td>
        <td>
          Select
        </td>
        <td>
          cats.effect.std.Hotswap.clear
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          hotswap.clear
        </td>
      </tr><tr>
        <td>
          93
        </td>
        <td>
          11749
        </td>
        <td>
          3176
          -
          4852
        </td>
        <td>
          Apply
        </td>
        <td>
          cats.Apply.Ops.*&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          cats.syntax.`package`.all.catsSyntaxApply[F, Unit](hotswap.clear)(F).*&gt;[org.http4s.Response[F]](cats.syntax.`package`.all.toFlatMapOps[F, Either[Throwable,org.http4s.Response[F]]](hotswap.swap(client.run(req.withAttribute[Int](Retry.this.AttemptCountKey, attempts)).map[org.http4s.Response[F]](((x$1: org.http4s.Response[F]) =&gt; x$1.withAttribute[Int](Retry.this.AttemptCountKey, attempts))).attempt[Throwable](F)))(F).flatMap[org.http4s.Response[F]](((x0$1: Either[Throwable,org.http4s.Response[F]]) =&gt; x0$1 match {
  case (value: org.http4s.Response[F]): scala.util.Right[Throwable,org.http4s.Response[F]]((response @ _)) =&gt; policy.apply(req, scala.`package`.Right.apply[Nothing, org.http4s.Response[F]](response), attempts) match {
    case (value: scala.concurrent.duration.FiniteDuration): Some[scala.concurrent.duration.FiniteDuration]((duration @ _)) =&gt; {
      if (logRetries)
        if (Retry.this.logger.logger.isInfoEnabled())
          Retry.this.logger.logger.info((&quot;Request &quot;.+(showRequest(req, redactHeaderWhen)).+(&quot; has failed on attempt #&quot;).+(attempts).+(&quot; with reason &quot;).+(response.status).+(&quot;. Retrying after &quot;).+(duration).+(&quot;.&quot;): String))
        else
          ()
      else
        ();
      nextAttempt(req, attempts, duration, response.headers.get[org.http4s.headers.Retry-After](Header.this.Select.singleHeaders[org.http4s.headers.Retry-After](headers.this.Retry-After.headerInstance)), hotswap)
    }
    case scala.None =&gt; F.pure[org.http4s.Response[F]](response)
  }
  case (value: Throwable): scala.util.Left[Throwable,org.http4s.Response[F]]((e @ _)) =&gt; policy.apply(req, scala.`package`.Left.apply[Throwable, Nothing](e), attempts) match {
    case (value: scala.concurrent.duration.FiniteDuration): Some[scala.concurrent.duration.FiniteDuration]((duration @ _)) =&gt; {
      if (logRetries)
        if (Retry.this.logger.logger.isInfoEnabled())
          Retry.this.logger.logger.info((&quot;Request threw an exception on attempt #&quot;.+(attempts).+(&quot;. Retrying after &quot;).+(duration): String), e)
        else
          ()
      else
        ();
      nextAttempt(req, attempts, duration, scala.None, hotswap)
    }
    case scala.None =&gt; {
      if (logRetries)
        if (Retry.this.logger.logger.isInfoEnabled())
          Retry.this.logger.logger.info((&quot;Request &quot;.+(showRequest(req, redactHeaderWhen)).+(&quot; threw an exception on attempt #&quot;).+(attempts).+(&quot;. Giving up.&quot;): String), e)
        else
          ()
      else
        ();
      F.raiseError[org.http4s.Response[F]](e)
    }
  }
})))
        </td>
      </tr><tr>
        <td>
          95
        </td>
        <td>
          11423
        </td>
        <td>
          3289
          -
          3495
        </td>
        <td>
          Apply
        </td>
        <td>
          cats.effect.std.Hotswap.swap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          hotswap.swap(client.run(req.withAttribute[Int](Retry.this.AttemptCountKey, attempts)).map[org.http4s.Response[F]](((x$1: org.http4s.Response[F]) =&gt; x$1.withAttribute[Int](Retry.this.AttemptCountKey, attempts))).attempt[Throwable](F))
        </td>
      </tr><tr>
        <td>
          99
        </td>
        <td>
          11832
        </td>
        <td>
          3326
          -
          3483
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          cats.effect.kernel.Resource.attempt
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          client.run(req.withAttribute[Int](Retry.this.AttemptCountKey, attempts)).map[org.http4s.Response[F]](((x$1: org.http4s.Response[F]) =&gt; x$1.withAttribute[Int](Retry.this.AttemptCountKey, attempts))).attempt[Throwable](F)
        </td>
      </tr><tr>
        <td>
          101
        </td>
        <td>
          11032
        </td>
        <td>
          3289
          -
          4852
        </td>
        <td>
          Apply
        </td>
        <td>
          cats.FlatMap.Ops.flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          cats.syntax.`package`.all.toFlatMapOps[F, Either[Throwable,org.http4s.Response[F]]](hotswap.swap(client.run(req.withAttribute[Int](Retry.this.AttemptCountKey, attempts)).map[org.http4s.Response[F]](((x$1: org.http4s.Response[F]) =&gt; x$1.withAttribute[Int](Retry.this.AttemptCountKey, attempts))).attempt[Throwable](F)))(F).flatMap[org.http4s.Response[F]](((x0$1: Either[Throwable,org.http4s.Response[F]]) =&gt; x0$1 match {
  case (value: org.http4s.Response[F]): scala.util.Right[Throwable,org.http4s.Response[F]]((response @ _)) =&gt; policy.apply(req, scala.`package`.Right.apply[Nothing, org.http4s.Response[F]](response), attempts) match {
    case (value: scala.concurrent.duration.FiniteDuration): Some[scala.concurrent.duration.FiniteDuration]((duration @ _)) =&gt; {
      if (logRetries)
        if (Retry.this.logger.logger.isInfoEnabled())
          Retry.this.logger.logger.info((&quot;Request &quot;.+(showRequest(req, redactHeaderWhen)).+(&quot; has failed on attempt #&quot;).+(attempts).+(&quot; with reason &quot;).+(response.status).+(&quot;. Retrying after &quot;).+(duration).+(&quot;.&quot;): String))
        else
          ()
      else
        ();
      nextAttempt(req, attempts, duration, response.headers.get[org.http4s.headers.Retry-After](Header.this.Select.singleHeaders[org.http4s.headers.Retry-After](headers.this.Retry-After.headerInstance)), hotswap)
    }
    case scala.None =&gt; F.pure[org.http4s.Response[F]](response)
  }
  case (value: Throwable): scala.util.Left[Throwable,org.http4s.Response[F]]((e @ _)) =&gt; policy.apply(req, scala.`package`.Left.apply[Throwable, Nothing](e), attempts) match {
    case (value: scala.concurrent.duration.FiniteDuration): Some[scala.concurrent.duration.FiniteDuration]((duration @ _)) =&gt; {
      if (logRetries)
        if (Retry.this.logger.logger.isInfoEnabled())
          Retry.this.logger.logger.info((&quot;Request threw an exception on attempt #&quot;.+(attempts).+(&quot;. Retrying after &quot;).+(duration): String), e)
        else
          ()
      else
        ();
      nextAttempt(req, attempts, duration, scala.None, hotswap)
    }
    case scala.None =&gt; {
      if (logRetries)
        if (Retry.this.logger.logger.isInfoEnabled())
          Retry.this.logger.logger.info((&quot;Request &quot;.+(showRequest(req, redactHeaderWhen)).+(&quot; threw an exception on attempt #&quot;).+(attempts).+(&quot;. Giving up.&quot;): String), e)
        else
          ()
      else
        ();
      F.raiseError[org.http4s.Response[F]](e)
    }
  }
}))
        </td>
      </tr><tr>
        <td>
          103
        </td>
        <td>
          11926
        </td>
        <td>
          3567
          -
          3605
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Function3.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          policy.apply(req, scala.`package`.Right.apply[Nothing, org.http4s.Response[F]](response), attempts)
        </td>
      </tr><tr>
        <td>
          103
        </td>
        <td>
          12134
        </td>
        <td>
          3579
          -
          3594
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.util.Right.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.`package`.Right.apply[Nothing, org.http4s.Response[F]](response)
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          11047
        </td>
        <td>
          3671
          -
          3671
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          11782
        </td>
        <td>
          3671
          -
          3671
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          11494
        </td>
        <td>
          3718
          -
          3718
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Retry.this.logger.logger.isInfoEnabled())
  Retry.this.logger.logger.info((&quot;Request &quot;.+(showRequest(req, redactHeaderWhen)).+(&quot; has failed on attempt #&quot;).+(attempts).+(&quot; with reason &quot;).+(response.status).+(&quot;. Retrying after &quot;).+(duration).+(&quot;.&quot;): String))
else
  ()
        </td>
      </tr><tr>
        <td>
          109
        </td>
        <td>
          11812
        </td>
        <td>
          3963
          -
          3998
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.http4s.Headers.get
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          response.headers.get[org.http4s.headers.Retry-After](Header.this.Select.singleHeaders[org.http4s.headers.Retry-After](headers.this.Retry-After.headerInstance))
        </td>
      </tr><tr>
        <td>
          109
        </td>
        <td>
          11552
        </td>
        <td>
          3983
          -
          3983
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.headers.Retry-After.headerInstance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          headers.this.Retry-After.headerInstance
        </td>
      </tr><tr>
        <td>
          109
        </td>
        <td>
          11130
        </td>
        <td>
          3983
          -
          3983
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.http4s.Header.Select.singleHeaders
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Header.this.Select.singleHeaders[org.http4s.headers.Retry-After](headers.this.Retry-After.headerInstance)
        </td>
      </tr><tr>
        <td>
          109
        </td>
        <td>
          11417
        </td>
        <td>
          3926
          -
          4008
        </td>
        <td>
          Apply
        </td>
        <td>
          org.http4s.client.middleware.Retry.nextAttempt
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          nextAttempt(req, attempts, duration, response.headers.get[org.http4s.headers.Retry-After](Header.this.Select.singleHeaders[org.http4s.headers.Retry-After](headers.this.Retry-After.headerInstance)), hotswap)
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          12120
        </td>
        <td>
          4056
          -
          4072
        </td>
        <td>
          Apply
        </td>
        <td>
          cats.Applicative.pure
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          F.pure[org.http4s.Response[F]](response)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          11902
        </td>
        <td>
          4144
          -
          4151
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.util.Left.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.`package`.Left.apply[Throwable, Nothing](e)
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          11447
        </td>
        <td>
          4132
          -
          4162
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Function3.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          policy.apply(req, scala.`package`.Left.apply[Throwable, Nothing](e), attempts)
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          11321
        </td>
        <td>
          4302
          -
          4302
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          11745
        </td>
        <td>
          4302
          -
          4302
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          119
        </td>
        <td>
          11051
        </td>
        <td>
          4352
          -
          4352
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Retry.this.logger.logger.isInfoEnabled())
  Retry.this.logger.logger.info((&quot;Request threw an exception on attempt #&quot;.+(attempts).+(&quot;. Retrying after &quot;).+(duration): String), e)
else
  ()
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          11816
        </td>
        <td>
          4494
          -
          4545
        </td>
        <td>
          Apply
        </td>
        <td>
          org.http4s.client.middleware.Retry.nextAttempt
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          nextAttempt(req, attempts, duration, scala.None, hotswap)
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          11101
        </td>
        <td>
          4531
          -
          4535
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          124
        </td>
        <td>
          11888
        </td>
        <td>
          4593
          -
          4593
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          124
        </td>
        <td>
          12106
        </td>
        <td>
          4593
          -
          4593
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          125
        </td>
        <td>
          11419
        </td>
        <td>
          4643
          -
          4643
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          if (Retry.this.logger.logger.isInfoEnabled())
  Retry.this.logger.logger.info((&quot;Request &quot;.+(showRequest(req, redactHeaderWhen)).+(&quot; threw an exception on attempt #&quot;).+(attempts).+(&quot;. Giving up.&quot;): String), e)
else
  ()
        </td>
      </tr><tr>
        <td>
          128
        </td>
        <td>
          11438
        </td>
        <td>
          4809
          -
          4824
        </td>
        <td>
          Apply
        </td>
        <td>
          cats.ApplicativeError.raiseError
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          F.raiseError[org.http4s.Response[F]](e)
        </td>
      </tr><tr>
        <td>
          132
        </td>
        <td>
          11311
        </td>
        <td>
          4858
          -
          5014
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.http4s.client.Client.apply
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          Client.apply[[_]F[_]](((req: org.http4s.Request[[_]F[_]]) =&gt; cats.effect.std.Hotswap.create[F, Either[Throwable,org.http4s.Response[F]]](F).flatMap[org.http4s.Response[F]](((hotswap: cats.effect.std.Hotswap[F,Either[Throwable,org.http4s.Response[F]]]) =&gt; cats.effect.kernel.Resource.eval[F, org.http4s.Response[F]](retryLoop(req, 1, hotswap))))))(F)
        </td>
      </tr><tr>
        <td>
          158
        </td>
        <td>
          11360
        </td>
        <td>
          5828
          -
          5844
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Function1.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          backoff.apply(retries)
        </td>
      </tr><tr>
        <td>
          158
        </td>
        <td>
          11820
        </td>
        <td>
          5828
          -
          5844
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Function1.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          backoff.apply(retries)
        </td>
      </tr><tr>
        <td>
          158
        </td>
        <td>
          11123
        </td>
        <td>
          5804
          -
          5826
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Function2.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          retriable.apply(req, result)
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          11667
        </td>
        <td>
          5854
          -
          5858
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          12109
        </td>
        <td>
          5854
          -
          5858
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          scala.None
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          11857
        </td>
        <td>
          5955
          -
          6135
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.IterableFactory.apply
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          scala.Predef.Set.apply[org.http4s.Status](org.http4s.Status.RequestTimeout, org.http4s.Status.InternalServerError, org.http4s.Status.ServiceUnavailable, org.http4s.Status.BadGateway, org.http4s.Status.GatewayTimeout)
        </td>
      </tr><tr>
        <td>
          164
        </td>
        <td>
          11492
        </td>
        <td>
          5964
          -
          5978
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.Status.RequestTimeout
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          org.http4s.Status.RequestTimeout
        </td>
      </tr><tr>
        <td>
          166
        </td>
        <td>
          11036
        </td>
        <td>
          6051
          -
          6070
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.Status.InternalServerError
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          org.http4s.Status.InternalServerError
        </td>
      </tr><tr>
        <td>
          167
        </td>
        <td>
          11726
        </td>
        <td>
          6076
          -
          6094
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.Status.ServiceUnavailable
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          org.http4s.Status.ServiceUnavailable
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          11313
        </td>
        <td>
          6100
          -
          6110
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.Status.BadGateway
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          org.http4s.Status.BadGateway
        </td>
      </tr><tr>
        <td>
          169
        </td>
        <td>
          11129
        </td>
        <td>
          6116
          -
          6130
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.Status.GatewayTimeout
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          org.http4s.Status.GatewayTimeout
        </td>
      </tr><tr>
        <td>
          180
        </td>
        <td>
          12086
        </td>
        <td>
          6630
          -
          6669
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          org.http4s.Headers.contains
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          req.headers.contains[org.http4s.headers.Idempotency-Key](headers.this.Idempotency-Key.headerInstance)
        </td>
      </tr><tr>
        <td>
          180
        </td>
        <td>
          11362
        </td>
        <td>
          6650
          -
          6650
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.headers.Idempotency-Key.headerInstance
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          headers.this.Idempotency-Key.headerInstance
        </td>
      </tr><tr>
        <td>
          180
        </td>
        <td>
          11496
        </td>
        <td>
          6602
          -
          6712
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          req.method.isIdempotent.||(req.headers.contains[org.http4s.headers.Idempotency-Key](headers.this.Idempotency-Key.headerInstance)).&amp;&amp;(RetryPolicy.this.isErrorOrRetriableStatus[[_]F[_]](result))
        </td>
      </tr><tr>
        <td>
          181
        </td>
        <td>
          11706
        </td>
        <td>
          6680
          -
          6712
        </td>
        <td>
          Apply
        </td>
        <td>
          org.http4s.client.middleware.RetryPolicy.isErrorOrRetriableStatus
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          RetryPolicy.this.isErrorOrRetriableStatus[[_]F[_]](result)
        </td>
      </tr><tr>
        <td>
          193
        </td>
        <td>
          11026
        </td>
        <td>
          7238
          -
          7270
        </td>
        <td>
          Apply
        </td>
        <td>
          org.http4s.client.middleware.RetryPolicy.isErrorOrRetriableStatus
        </td>
        <td>
          org.http4s.client.middleware.retrysuite
        </td>
        <td style="background: #AEF1AE">
          RetryPolicy.this.isErrorOrRetriableStatus[[_]F[_]](result)
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          11727
        </td>
        <td>
          7498
          -
          7515
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.client.middleware.RetryPolicy.RetriableStatuses
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          RetryPolicy.this.RetriableStatuses
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          11295
        </td>
        <td>
          7474
          -
          7516
        </td>
        <td>
          Apply
        </td>
        <td>
          org.http4s.client.middleware.RetryPolicy.isErrorOrStatus
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          RetryPolicy.this.isErrorOrStatus[[_]F[_]](result, RetryPolicy.this.RetriableStatuses)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          11100
        </td>
        <td>
          7784
          -
          7795
        </td>
        <td>
          Select
        </td>
        <td>
          org.http4s.Response.status
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          resp.status
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          11859
        </td>
        <td>
          7777
          -
          7796
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.collection.SetOps.apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          status.apply(resp.status)
        </td>
      </tr><tr>
        <td>
          203
        </td>
        <td>
          11403
        </td>
        <td>
          7843
          -
          7848
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          false
        </td>
      </tr><tr>
        <td>
          204
        </td>
        <td>
          12090
        </td>
        <td>
          7865
          -
          7869
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          true
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          11710
        </td>
        <td>
          7993
          -
          8009
        </td>
        <td>
          Select
        </td>
        <td>
          scala.concurrent.duration.Duration.toMillis
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          maxWait.toMillis
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          11770
        </td>
        <td>
          8037
          -
          8041
        </td>
        <td>
          Block
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          11471
        </td>
        <td>
          8023
          -
          8035
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          k.&gt;(maxRetry)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          12074
        </td>
        <td>
          8047
          -
          8079
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[scala.concurrent.duration.FiniteDuration](RetryPolicy.this.expBackoff(k, maxInMillis))
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          11030
        </td>
        <td>
          8037
          -
          8041
        </td>
        <td>
          Select
        </td>
        <td>
          scala.None
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.None
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          11329
        </td>
        <td>
          8052
          -
          8078
        </td>
        <td>
          Apply
        </td>
        <td>
          org.http4s.client.middleware.RetryPolicy.expBackoff
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          RetryPolicy.this.expBackoff(k, maxInMillis)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          11843
        </td>
        <td>
          8047
          -
          8079
        </td>
        <td>
          Block
        </td>
        <td>
          scala.Some.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.Some.apply[scala.concurrent.duration.FiniteDuration](RetryPolicy.this.expBackoff(k, maxInMillis))
        </td>
      </tr><tr>
        <td>
          213
        </td>
        <td>
          11406
        </td>
        <td>
          8174
          -
          8211
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Double.*
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.math.`package`.pow(2.0, k.toDouble).-(1.0).*(1000.0)
        </td>
      </tr><tr>
        <td>
          214
        </td>
        <td>
          12126
        </td>
        <td>
          8243
          -
          8263
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Long.toDouble
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          maxInMillis.toDouble
        </td>
      </tr><tr>
        <td>
          214
        </td>
        <td>
          11690
        </td>
        <td>
          8231
          -
          8264
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.math.min
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.math.`package`.min(millis, maxInMillis.toDouble)
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          11476
        </td>
        <td>
          8284
          -
          8312
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Double.toLong
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.math.`package`.random().*(interval).toLong
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          11772
        </td>
        <td>
          8269
          -
          8327
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.duration.FiniteDuration.apply
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          scala.concurrent.duration.FiniteDuration.apply(scala.math.`package`.random().*(interval).toLong, MILLISECONDS)
        </td>
      </tr><tr>
        <td>
          215
        </td>
        <td>
          11009
        </td>
        <td>
          8314
          -
          8326
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          MILLISECONDS
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>